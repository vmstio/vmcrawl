{
  "apiVersion": "dashboard.grafana.app/v2beta1",
  "kind": "Dashboard",
  "metadata": {
    "name": "aedqo0q7klrswa",
    "generation": 71,
    "creationTimestamp": "2025-11-21T19:31:21Z",
    "labels": {},
    "annotations": {}
  },
  "spec": {
    "annotations": [
      {
        "kind": "AnnotationQuery",
        "spec": {
          "builtIn": true,
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "query": {
            "group": "grafana",
            "kind": "DataQuery",
            "spec": {},
            "version": "v0"
          }
        }
      }
    ],
    "cursorSync": "Off",
    "description": "Reports Mastodon version data and patch adoption",
    "editable": true,
    "elements": {
      "panel-1": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 1,
          "links": [],
          "title": "Mastodon Instances",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-10": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  domain || ' (' || software_version || ')' AS \"Instance\"\nFROM mastodon_domains\nORDER BY timestamp DESC\nLIMIT 1;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "*",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "mastodon_domains"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 10,
          "links": [],
          "title": "Last Crawled",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "time"
                    },
                    "properties": [
                      {
                        "id": "unit",
                        "value": "dateTimeFromNow"
                      }
                    ]
                  }
                ]
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "vertical",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": false
                },
                "showPercentChange": false,
                "text": {},
                "textMode": "value",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-101": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT md.software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1\n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n),\nunpatched_or_eol AS (\n  SELECT COUNT(*) AS cnt\n  FROM mastodon_domains md\n  WHERE md.software_version IN (SELECT software_version FROM eol_check)\n     OR md.software_version NOT IN (SELECT software_version FROM version_cases)\n),\ntotals AS (\n  SELECT COUNT(DISTINCT domain) AS total_domains\n  FROM mastodon_domains\n)\nSELECT\n  ((t.total_domains - u.cnt) * 100.0 / t.total_domains) AS patched_percent\nFROM totals t\nCROSS JOIN unpatched_or_eol u;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "Instances running a supported branch with the latest patches applied.",
          "id": 101,
          "links": [],
          "title": "Instances Patched",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "decimals": 1,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-102": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT md.software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1\n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n),\ntotals AS (\n  SELECT SUM(active_users_monthly) AS total_users\n  FROM mastodon_domains\n),\nunpatched_or_eol AS (\n  SELECT SUM(active_users_monthly) AS cnt\n  FROM mastodon_domains md\n  WHERE md.software_version IN (SELECT software_version FROM eol_check)\n     OR md.software_version NOT IN (SELECT software_version FROM version_cases)\n)\nSELECT\n  ((t.total_users - u.cnt) * 100.0 / t.total_users) AS patched_users_percent\nFROM totals t\nCROSS JOIN unpatched_or_eol u;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "Users on instances running a supported branch with the latest patches applied.",
          "id": 102,
          "links": [],
          "title": "MAU Patched",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "decimals": 1,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-103": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason LIKE 'MAU%' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 103,
          "links": [],
          "title": "MAU Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-104": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH latest_stats AS (\n  SELECT\n    main_instances + latest_instances AS patched_instances\n  FROM statistics\n  ORDER BY date DESC\n  LIMIT 1\n),\ntotal_domains AS (\n  SELECT COUNT(DISTINCT domain) AS total_instances\n  FROM mastodon_domains\n)\nSELECT\n  (latest_stats.patched_instances::numeric / total_domains.total_instances) * 100\n    AS patched_percentage\nFROM latest_stats, total_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "Instances running either main or latest release branches, regardless of patch status.",
          "id": 104,
          "links": [],
          "title": "Instances on 4.5+",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "decimals": 1,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-105": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH latest_stats AS (\n  SELECT\n    main_branch_mau + latest_branch_mau AS patched_mau\n  FROM statistics\n  ORDER BY date DESC\n  LIMIT 1\n),\ntotal_mau AS (\n  SELECT COALESCE(SUM(active_users_monthly), 0) AS total_mau\n  FROM mastodon_domains\n)\nSELECT\n  (latest_stats.patched_mau::numeric / NULLIF(total_mau.total_mau, 0)) * 100\n    AS patched_mau_percentage\nFROM latest_stats, total_mau;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "Users on running either main or latest release branches, regardless of patch status.",
          "id": 105,
          "links": [],
          "title": "MAU on 4.5+",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "decimals": 1,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-11": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Main Patched\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT software_version \n    FROM patch_versions \n    WHERE main = True\n) || '%';\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Main Total\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level = -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for development branch (main), compared to the total instances on development branch.",
          "id": 11,
          "links": [],
          "title": "Patched Instances, Main",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-12": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    software_version AS \"Software Version\",\n    COUNT(*) AS \"Instances\"\nFROM mastodon_domains\nGROUP BY software_version\nORDER BY COUNT(*) DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 12,
          "links": [],
          "title": "Top 10 Versions by Instance",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "fixed"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "horizontal",
                "showValue": "auto",
                "stacking": "none",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-13": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Instance\",\n    software_version AS \"Version\",\n    active_users_monthly AS \"MAU\"\nFROM mastodon_domains \nWHERE software_version NOT IN (\n    SELECT software_version \n    FROM patch_versions\n)\nAND NOT EXISTS (\n    SELECT 1\n    FROM eol_versions\n    WHERE mastodon_domains.software_version LIKE eol_versions.software_version || '%'\n)\nORDER BY active_users_monthly DESC\nLIMIT 100;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 13,
          "links": [],
          "title": "Top 10 Unpatched Instances by MAUs",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "footer": {
                      "reducers": []
                    },
                    "inspect": false,
                    "wrapText": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "MAU"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 120
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Version"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 120
                      }
                    ]
                  }
                ]
              },
              "options": {
                "cellHeight": "sm",
                "enablePagination": true,
                "showHeader": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-21": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS \"Latest Patched\"\nFROM mastodon_domains\nWHERE software_version =\n(\n    SELECT software_version\n    FROM patch_versions\n    WHERE n_level = 0\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Total\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level = 0\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Latest Total",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for branch release-0 (latest), compared to the total instances on branch release-0.",
          "id": 21,
          "links": [],
          "title": "Patched Instances, Latest",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-22": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Patched\" \nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = 1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Total\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level = 1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Latest Total",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for branch release-1 (previous), compared to the total instances on branch release-1.",
          "id": 22,
          "links": [],
          "title": "Patched Instances, Previous",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-32": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = -1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for development branch (main), compared to the total instances on development branch.",
          "id": 32,
          "links": [],
          "title": "Patched MAUs, Main",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-35": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) AS updated_users\nFROM mastodon_domains\nWHERE software_version =\n(\n    SELECT software_version\n    FROM patch_versions\n    WHERE n_level = 0\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = 0\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for branch release-0 (latest), compared to the total instances on branch release-0.",
          "id": 35,
          "links": [],
          "title": "Patched MAUs, Latest",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-36": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = 1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = 1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for branch release-1 (previous), compared to the MAUs on branch release-1.",
          "id": 36,
          "links": [],
          "title": "Patched MAUs, Previous",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-4": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT software_version) AS unique_software_versions\nFROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "Count of distinct Mastodon versions, after various fork/meta identifiers are removed and nightly releases are normalized.",
          "id": 4,
          "links": [],
          "title": "Unique Versions Seen",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-41": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) AS total_users FROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 41,
          "links": [],
          "title": "Monthly Active Users (MAU)",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-47": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Instance\",\n    software_version AS \"Version\",\n    active_users_monthly AS \"MAU\"\nFROM mastodon_domains \nWHERE software_version NOT IN (\n    SELECT software_version \n    FROM patch_versions\n)\nAND EXISTS (\n    SELECT 1\n    FROM eol_versions\n    WHERE mastodon_domains.software_version LIKE eol_versions.software_version || '%'\n)\nORDER BY active_users_monthly DESC\nLIMIT 100;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 47,
          "links": [],
          "title": "Top 10 EOL Instances by MAUs",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "footer": {
                      "reducers": []
                    },
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "MAU"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 120
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Version"
                    },
                    "properties": [
                      {
                        "id": "custom.width",
                        "value": 120
                      }
                    ]
                  }
                ]
              },
              "options": {
                "cellHeight": "sm",
                "enablePagination": true,
                "showHeader": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-48": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    software_version AS \"Software Version\",\n    SUM(active_users_monthly) AS \"Monthly Active Users\"\nFROM mastodon_domains\nGROUP BY software_version\nORDER BY SUM(active_users_monthly) DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 48,
          "links": [],
          "title": "Top 10 Versions by MAUs",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "fixed"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "horizontal",
                "showValue": "auto",
                "stacking": "none",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-5": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1 \n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n)\nSELECT \n  CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END as version,\n  COUNT(*) as count\nFROM mastodon_domains \nGROUP BY CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 5,
          "links": [],
          "title": "Latest Patches by Instances",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "shades"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 1,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "EOL"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unpatched"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-66": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH prefixes AS (\n    SELECT branch FROM patch_versions\n),\nmatched AS (\n    SELECT\n        pv.branch AS prefix,\n        COUNT(md.software_version) AS total\n    FROM prefixes pv\n    LEFT JOIN mastodon_domains md\n      ON md.software_version LIKE pv.branch || '%'\n    GROUP BY pv.branch\n),\neol AS (\n    SELECT\n        'EOL' AS prefix,\n        COUNT(*) AS total\n    FROM mastodon_domains md\n    WHERE NOT EXISTS (\n        SELECT 1\n        FROM prefixes p\n        WHERE md.software_version LIKE p.branch || '%'\n    )\n)\nSELECT * FROM matched\nUNION ALL\nSELECT * FROM eol\nORDER BY prefix;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 66,
          "links": [],
          "title": "Supported Branch by Instances",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "green",
                    "mode": "shades"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 1,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "EOL"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-67": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH prefixes AS (\n    SELECT branch FROM patch_versions\n),\nmatched AS (\n    SELECT\n        pv.branch AS prefix,\n        SUM(md.active_users_monthly) AS total_active_users\n    FROM prefixes pv\n    LEFT JOIN mastodon_domains md\n      ON md.software_version LIKE pv.branch || '%'\n    GROUP BY pv.branch\n),\neol AS (\n    SELECT\n        'EOL' AS prefix,\n        SUM(active_users_monthly) AS total_active_users\n    FROM mastodon_domains md\n    WHERE NOT EXISTS (\n        SELECT 1\n        FROM prefixes p\n        WHERE md.software_version LIKE p.branch || '%'\n    )\n)\nSELECT * FROM matched\nUNION ALL\nSELECT * FROM eol\nORDER BY prefix;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 67,
          "links": [],
          "title": "Supported Branch by MAUs",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "green",
                    "mode": "shades"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 1,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "EOL"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-7": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1 \n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n)\nSELECT \n  CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END as version,\n  SUM(active_users_monthly) as user_count\nFROM mastodon_domains \nGROUP BY CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 7,
          "links": [],
          "title": "Latest Patches by MAUs",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "shades"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 1,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "EOL"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Unpatched"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "yellow",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-70": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    COUNT(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.5+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' \n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.4+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.3+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR\n        software_version LIKE '4.2%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.2+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR\n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.1+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR\n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%' OR\n        software_version LIKE '4.0%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.0+\"\n\nFROM \n    mastodon_domains\nWHERE \n    software_version IS NOT NULL;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 70,
          "links": [],
          "title": "Percent of Instances",
          "vizConfig": {
            "group": "bargauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "displayMode": "gradient",
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-71": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    SUM(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' \n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.5+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.6%' OR \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' \n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.4+\",\n\n    SUM(CASE WHEN\n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%'\n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.3+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR\n        software_version LIKE '4.2%'\n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.2+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR\n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%'\n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.1+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '5.0%' OR\n        software_version LIKE '4.9%' OR\n        software_version LIKE '4.8%' OR\n        software_version LIKE '4.7%' OR\n        software_version LIKE '4.6%' OR\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR\n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%' OR\n        software_version LIKE '4.0%'\n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.0+\"\nFROM \n    mastodon_domains\nWHERE \n    software_version IS NOT NULL\n    AND active_users_monthly IS NOT NULL;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 71,
          "links": [],
          "title": "Percent of MAUs",
          "vizConfig": {
            "group": "bargauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "displayMode": "gradient",
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-73": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Patched\" \nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= 2\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Total\"\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level >= 2\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Latest Total",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for branch release-2 (deprecated) or older, compared to the total instances on branch release-2 or older.",
          "id": 73,
          "links": [],
          "title": "Patched Instances, Deprecated",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-74": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= 2\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE ANY (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level >= 1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on  instances running latest patches for branch release-2 (deprecated) or older, compared to the MAUs on branch release-2 or older.",
          "id": 74,
          "links": [],
          "title": "Patched MAUs, Deprecated",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 33
                      },
                      {
                        "color": "green",
                        "value": 66
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-76": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Instances\",\n    software_version AS \"Version\",\n    full_version as \"Raw Version\",\n    active_users_monthly as \"Monthly Active Users\",\n    timestamp as \"Last Crawled\"\nFROM mastodon_domains\nORDER BY active_users_monthly DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "*",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "mastodon_domains"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 76,
          "links": [],
          "title": "All Instances",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "filterable": true,
                    "footer": {
                      "reducers": []
                    },
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Monthly Active Users"
                    },
                    "properties": [
                      {
                        "id": "custom.align",
                        "value": "auto"
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Last Crawled"
                    },
                    "properties": [
                      {
                        "id": "custom.align",
                        "value": "right"
                      }
                    ]
                  }
                ]
              },
              "options": {
                "cellHeight": "sm",
                "enablePagination": true,
                "showHeader": true,
                "sortBy": [
                  {
                    "desc": true,
                    "displayName": "Monthly Active Users"
                  }
                ]
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-79": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason LIKE 'SSL%' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 79,
          "links": [],
          "title": "SSL Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-80": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason LIKE 'DNS%' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 80,
          "links": [],
          "title": "DNS Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-81": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason LIKE 'TCP%' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 81,
          "links": [],
          "title": "TCP Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-82": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason LIKE 'API%' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 82,
          "links": [],
          "title": "API Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-83": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason LIKE 'FILE%' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 83,
          "links": [],
          "title": "File Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-84": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason ~ '^4[0-9]{2}' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 84,
          "links": [],
          "title": "4xx Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-85": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains\nWHERE reason ~ '^5[0-9]{2}' AND nodeinfo = 'mastodon'",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 85,
          "links": [],
          "title": "5xx Issues",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "yellow",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-88": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "dataset": "",
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.main_patched_instances AS \"Main Branch\",\n  statistics.latest_patched_instances AS \"Latest Branch\",\n  statistics.previous_patched_instances AS \"Previous Branch\",\n  statistics.deprecated_patched_instances AS \"Deprecated Branch\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 7;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "organize",
                  "spec": {
                    "id": "organize",
                    "options": {}
                  }
                },
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD-MMM",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 88,
          "links": [],
          "title": "Patches by Instance",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "orientation": "horizontal",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xField": "time",
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-89": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "dataset": "",
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.main_patched_mau AS \"Main Branch\",\n  statistics.latest_patched_mau AS \"Latest Branch\",\n  statistics.previous_patched_mau AS \"Previous Branch\",\n  statistics.deprecated_patched_mau AS \"Deprecated Branch\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 7;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "organize",
                  "spec": {
                    "id": "organize",
                    "options": {}
                  }
                },
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD-MMM",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 89,
          "links": [],
          "title": "Patches by MAU",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "orientation": "horizontal",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xField": "time",
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-90": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "dataset": "",
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.main_instances AS \"Main Branch\",\n  statistics.latest_instances AS \"Latest Branch\",\n  statistics.previous_instances AS \"Previous Branch\",\n  statistics.deprecated_instances AS \"Deprecated Branch\",\n  statistics.eol_instances AS \"EOL Branches\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 7;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "organize",
                  "spec": {
                    "id": "organize",
                    "options": {}
                  }
                },
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD-MMM",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 90,
          "links": [],
          "title": "Branches by Instance",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "orientation": "horizontal",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xField": "time",
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-91": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "dataset": "",
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.main_branch_mau AS \"Main Branch\",\n  statistics.latest_branch_mau AS \"Latest Branch\",\n  statistics.previous_branch_mau AS \"Previous Branch\",\n  statistics.deprecated_branch_mau AS \"Deprecated Branch\",\n  statistics.eol_branch_mau AS \"EOL Branches\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 7;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "organize",
                  "spec": {
                    "id": "organize",
                    "options": {}
                  }
                },
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD-MMM",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 91,
          "links": [],
          "title": "Branches by MAU",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "orientation": "horizontal",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xField": "time",
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-92": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 92,
          "links": [],
          "title": "Known Domains",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "text",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-93": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains WHERE (ignore IS NOT NULL OR nxdomain IS NOT NULL OR failed IS NOT NULL OR alias IS NOT NULL)",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 93,
          "links": [],
          "title": "Dead Domains",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "text",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-95": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains WHERE \"nodeinfo\"::TEXT NOT ILIKE '%mastodon%';",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 95,
          "links": [],
          "title": "Non-Mastodon Instances",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "light-blue",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-96": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH prefixes AS (\n  SELECT DISTINCT software_version AS prefix\n  FROM eol_versions\n  WHERE software_version IS NOT NULL\n    AND software_version <> ''\n    AND software_version NOT LIKE '1%'\n    AND software_version NOT LIKE '2%'\n),\nmatched AS (\n  SELECT\n    p.prefix,\n    COUNT(md.software_version) AS total\n  FROM prefixes p\n  LEFT JOIN mastodon_domains md\n    ON md.software_version LIKE p.prefix || '%'\n  GROUP BY p.prefix\n)\nSELECT prefix, total\nFROM matched\nORDER BY prefix;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 96,
          "links": [],
          "title": "End of Life (EOL) Branch by Instances",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "light-red",
                    "mode": "shades"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 1,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "EOL"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-97": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH prefixes AS (\n  SELECT DISTINCT software_version AS prefix\n  FROM eol_versions\n  WHERE software_version IS NOT NULL\n    AND software_version <> ''\n    AND software_version NOT LIKE '1%'\n    AND software_version NOT LIKE '2%'\n),\nmatched AS (\n  SELECT\n    p.prefix,\n    COALESCE(SUM(md.active_users_monthly), 0) AS total_active_users\n  FROM prefixes p\n  LEFT JOIN mastodon_domains md\n    ON md.software_version LIKE p.prefix || '%'\n  GROUP BY p.prefix\n)\nSELECT prefix, total_active_users\nFROM matched\nORDER BY prefix;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 97,
          "links": [],
          "title": "End of Life (EOL) Branch by MAUs",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "light-red",
                    "mode": "shades"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 1,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "EOL"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "red",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      },
      "panel-98": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM raw_domains WHERE (norobots IS NOT NULL OR baddata IS NOT NULL OR noapi IS NOT NULL)",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 98,
          "links": [],
          "title": "Blocked Domains",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "text",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.4.0-21107691622"
          }
        }
      }
    },
    "layout": {
      "kind": "RowsLayout",
      "spec": {
        "rows": [
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-1"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-41"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 6,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-101"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 12,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-102"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 18,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-10"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 0,
                        "y": 4
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-4"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 6,
                        "y": 4
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-104"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 12,
                        "y": 4
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-105"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 18,
                        "y": 4
                      }
                    }
                  ]
                }
              },
              "title": "Big Numbers"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-81"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-79"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 3,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-80"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 6,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-85"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 9,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-84"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 12,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-83"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 15,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-103"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 18,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-82"
                        },
                        "height": 4,
                        "width": 3,
                        "x": 21,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-92"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 0,
                        "y": 4
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-93"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 6,
                        "y": 4
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-98"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 12,
                        "y": 4
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-95"
                        },
                        "height": 4,
                        "width": 6,
                        "x": 18,
                        "y": 4
                      }
                    }
                  ]
                }
              },
              "title": "Crawler Health"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-11"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-21"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 6,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-22"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 12,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-73"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 18,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-32"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 0,
                        "y": 7
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-35"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 6,
                        "y": 7
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-36"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 12,
                        "y": 7
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-74"
                        },
                        "height": 7,
                        "width": 6,
                        "x": 18,
                        "y": 7
                      }
                    }
                  ]
                }
              },
              "title": "Adoption Gauges"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-5"
                        },
                        "height": 18,
                        "width": 12,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-7"
                        },
                        "height": 18,
                        "width": 12,
                        "x": 12,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-66"
                        },
                        "height": 18,
                        "width": 12,
                        "x": 0,
                        "y": 18
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-67"
                        },
                        "height": 18,
                        "width": 12,
                        "x": 12,
                        "y": 18
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-96"
                        },
                        "height": 18,
                        "width": 12,
                        "x": 0,
                        "y": 36
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-97"
                        },
                        "height": 18,
                        "width": 12,
                        "x": 12,
                        "y": 36
                      }
                    }
                  ]
                }
              },
              "title": "Adoption Donuts"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-90"
                        },
                        "height": 8,
                        "width": 12,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-91"
                        },
                        "height": 8,
                        "width": 12,
                        "x": 12,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-88"
                        },
                        "height": 8,
                        "width": 12,
                        "x": 0,
                        "y": 8
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-89"
                        },
                        "height": 8,
                        "width": 12,
                        "x": 12,
                        "y": 8
                      }
                    }
                  ]
                }
              },
              "title": "Trend"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-70"
                        },
                        "height": 7,
                        "width": 24,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-71"
                        },
                        "height": 7,
                        "width": 24,
                        "x": 0,
                        "y": 7
                      }
                    }
                  ]
                }
              },
              "title": "Branch Adoption"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-12"
                        },
                        "height": 12,
                        "width": 12,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-48"
                        },
                        "height": 12,
                        "width": 12,
                        "x": 12,
                        "y": 0
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-13"
                        },
                        "height": 13,
                        "width": 12,
                        "x": 0,
                        "y": 12
                      }
                    },
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-47"
                        },
                        "height": 13,
                        "width": 12,
                        "x": 12,
                        "y": 12
                      }
                    }
                  ]
                }
              },
              "title": "Top 10 Lists"
            }
          },
          {
            "kind": "RowsLayoutRow",
            "spec": {
              "collapse": false,
              "layout": {
                "kind": "GridLayout",
                "spec": {
                  "items": [
                    {
                      "kind": "GridLayoutItem",
                      "spec": {
                        "element": {
                          "kind": "ElementReference",
                          "name": "panel-76"
                        },
                        "height": 28,
                        "width": 24,
                        "x": 0,
                        "y": 0
                      }
                    }
                  ]
                }
              },
              "title": "All Data"
            }
          }
        ]
      }
    },
    "links": [],
    "liveNow": true,
    "preload": false,
    "tags": [],
    "timeSettings": {
      "autoRefresh": "auto",
      "autoRefreshIntervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ],
      "fiscalYearStartMonth": 0,
      "from": "now-6h",
      "hideTimepicker": false,
      "timezone": "browser",
      "to": "now"
    },
    "title": "vmcrawl",
    "variables": []
  },
  "status": {}
}