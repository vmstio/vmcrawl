{
  "apiVersion": "dashboard.grafana.app/v2beta1",
  "kind": "Dashboard",
  "metadata": {
    "name": "aedqo0q7klrswa",
    "namespace": "default",
    "uid": "iX4gD7eXtwsCdcdtXxW6EThvcmNup6AODD7rZnZj8KUX",
    "resourceVersion": "89",
    "generation": 89,
    "creationTimestamp": "2025-02-21T16:03:06Z",
    "labels": {
      "grafana.app/deprecatedInternalID": "3"
    },
    "annotations": {
      "grafana.app/createdBy": "user:aedqwc9aizocge",
      "grafana.app/updatedBy": "user:aedqwc9aizocge",
      "grafana.app/updatedTimestamp": "2025-10-09T18:26:19Z"
    }
  },
  "spec": {
    "annotations": [
      {
        "kind": "AnnotationQuery",
        "spec": {
          "builtIn": true,
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "query": {
            "datasource": {
              "name": "-- Grafana --"
            },
            "group": "grafana",
            "kind": "DataQuery",
            "spec": {},
            "version": "v0"
          }
        }
      }
    ],
    "cursorSync": "Off",
    "description": "Reports Mastodon version data and patch adoption",
    "editable": true,
    "elements": {
      "panel-1": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 1,
          "links": [],
          "title": "Crawled Instances",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-10": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Domain\",\n    software_version AS \"Software Version\",\n    full_version as \"Raw Version\",\n    total_users AS \"Total Users\",\n    active_users_monthly as \"Active Users\",\n    timestamp as \"Last Crawled (UTC)\"\nFROM mastodon_domains\nORDER BY total_users DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "*",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "mastodon_domains"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 10,
          "links": [],
          "title": "All Domains",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "filterable": true,
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "enablePagination": true,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true,
                "sortBy": []
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-11": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Main Patched\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT software_version \n    FROM patch_versions \n    WHERE main = True\n) || '%';\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Main Total\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level = -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for development branch (main), compared to the total instances on development branch.",
          "id": 11,
          "links": [],
          "title": "Patched Instances, Main",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-12": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    software_version AS \"Software Version\",\n    COUNT(*) AS \"Instances\"\nFROM mastodon_domains\nGROUP BY software_version\nORDER BY COUNT(*) DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 12,
          "links": [],
          "title": "Top 10 Versions by Instance",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "fixed"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "horizontal",
                "showValue": "auto",
                "stacking": "none",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-13": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Domain\",\n    active_users_monthly AS \"Active Users\",\n    software_version AS \"Software Version\"\nFROM mastodon_domains \nWHERE software_version NOT IN (\n    SELECT software_version \n    FROM patch_versions\n)\nAND NOT EXISTS (\n    SELECT 1\n    FROM eol_versions\n    WHERE mastodon_domains.software_version LIKE eol_versions.software_version || '%'\n)\nORDER BY active_users_monthly DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 13,
          "links": [],
          "title": "Top 10 Unpatched Instances by MAUs",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-16": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n    timestamp as \"Last Crawled\"\nFROM mastodon_domains\nORDER BY timestamp DESC\nLIMIT 1;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "",
                      "timeField": "",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 16,
          "links": [],
          "title": "Last Crawl Activity (Local Time)",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "text",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "dateTimeAsLocal"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "Last Crawled"
                    },
                    "properties": []
                  }
                ]
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/^Last Crawled$/",
                  "values": true
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-20": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_matches AS (\n    SELECT \n        md.software_version,\n        md.active_users_monthly,\n        COALESCE(ev.software_version, pv.branch) as \"Branch Version\"\n    FROM \n        mastodon_domains md\n    LEFT JOIN eol_versions ev \n        ON md.software_version LIKE ev.software_version || '%'\n    LEFT JOIN patch_versions pv \n        ON md.software_version LIKE pv.branch || '%'\n    WHERE \n        ev.software_version IS NOT NULL \n        OR pv.branch IS NOT NULL\n)\nSELECT \n    \"Branch Version\",\n    SUM(active_users_monthly) as \"Total Users\"\nFROM \n    version_matches\nGROUP BY \n    \"Branch Version\"\nORDER BY \n    \"Branch Version\" DESC\nLIMIT 10\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 20,
          "links": [],
          "title": "Top 10 Branches by MAUs",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "fixed"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "blue",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "horizontal",
                "showValue": "auto",
                "stacking": "none",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-21": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Patched\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT software_version \n    FROM patch_versions \n    WHERE n_level = 0\n) || '%';\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Total\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level = 0\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Latest Total",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for branch release-0 (latest), compared to the total instances on branch release-0.",
          "id": 21,
          "links": [],
          "title": "Patched Instances, Latest",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-22": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Patched\" \nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= 1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"Latest Total\"\nFROM mastodon_domains \nWHERE software_version LIKE (\n    SELECT branch || '.%'\n    FROM patch_versions \n    WHERE n_level = 1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Latest Total",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for branch release-1 (previous) or older, compared to the total instances on branch release-1.",
          "id": 22,
          "links": [],
          "title": "Patched Instances, Previous",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-24": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.total_main_instances AS \"Main Branch\",\n  statistics.total_release_instances AS \"Latest Branch\",\n  statistics.total_previous_instances AS \"Previous Branch\",\n  statistics.total_pending_eol_instances AS \"Deprecated Branch\",\n  statistics.total_eol_instances AS \"EOL\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 30",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "date",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            },
                            {
                              "parameters": [
                                {
                                  "name": "total_mastodon_domains",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "statistics"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    statistics.date,\n    statistics.total_mastodon_domains\nFROM \n    statistics\nORDER BY \n    statistics.date DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                },
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_mastodon_domains",
                          "handlerKey": "max",
                          "reducerId": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 24,
          "links": [],
          "title": "Total Mastodon Instances by Branch",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-25": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.total_main_branch_users AS \"Main Branch\",\n  statistics.total_release_branch_users AS \"Latest Branch\",\n  statistics.total_previous_branch_users AS \"Previous Branch\",\n  statistics.total_pending_eol_branch_users AS \"Deprecated Branch\",\n  statistics.total_eol_branch_users AS \"EOL\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 30",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "date",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            },
                            {
                              "parameters": [
                                {
                                  "name": "total_mastodon_domains",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "statistics"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    statistics.date,\n    statistics.total_users\nFROM \n    statistics\nORDER BY \n    statistics.date DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                },
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_mastodon_domains",
                          "handlerKey": "max",
                          "reducerId": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 25,
          "links": [],
          "title": "Total Mastodon Users by Branch",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-26": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.total_active_main_branch_users AS \"Main Branch\",\n  statistics.total_active_release_branch_users AS \"Latest Branch\",\n  statistics.total_active_previous_branch_users AS \"Previous Branch\",\n  statistics.total_active_pending_eol_branch_users AS \"Deprecated Branch\",\n  statistics.total_active_eol_branch_users AS \"EOL\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 30",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "date",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            },
                            {
                              "parameters": [
                                {
                                  "name": "total_mastodon_domains",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "statistics"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    statistics.date,\n    statistics.total_active_users\nFROM \n    statistics\nORDER BY \n    statistics.date DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                },
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_mastodon_domains",
                          "handlerKey": "max",
                          "reducerId": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 26,
          "links": [],
          "title": "Active Mastodon Users by Branch",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-27": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.total_main_patched_instances AS \"Main Branch\",\n  statistics.total_release_patched_instances AS \"Latest Branch\",\n  statistics.total_previous_patched_instances AS \"Previous Branch\",\n  statistics.total_pending_eol_patched_instances AS \"Deprecated Branch\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 30",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "date",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            },
                            {
                              "parameters": [
                                {
                                  "name": "total_mastodon_domains",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "statistics"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    statistics.date,\n    statistics.total_mastodon_domains\nFROM \n    statistics\nORDER BY \n    statistics.date DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                },
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_mastodon_domains",
                          "handlerKey": "max",
                          "reducerId": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 27,
          "links": [],
          "title": "Total Mastodon Instances by Patched Release",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-28": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.total_active_main_patched_users AS \"Main Branch\",\n  statistics.total_active_release_patched_users AS \"Latest Branch\",\n  statistics.total_active_previous_patched_users AS \"Previous Branch\",\n  statistics.total_active_pending_eol_patched_users AS \"Deprecated Branch\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 30",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "date",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            },
                            {
                              "parameters": [
                                {
                                  "name": "total_mastodon_domains",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "statistics"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    statistics.date,\n    statistics.total_active_users\nFROM \n    statistics\nORDER BY \n    statistics.date DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                },
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_mastodon_domains",
                          "handlerKey": "max",
                          "reducerId": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 28,
          "links": [],
          "title": "Active Mastodon Users by Patched Release",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-29": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT\n  statistics.date AS time,\n  statistics.total_main_patched_users AS \"Main Branch\",\n  statistics.total_release_patched_users AS \"Latest Branch\",\n  statistics.total_previous_patched_users AS \"Previous Branch\",\n  statistics.total_pending_eol_patched_users AS \"Deprecated Branch\"\nFROM\n  statistics\nORDER BY\n  statistics.date DESC\nLIMIT 30",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [
                                {
                                  "name": "date",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            },
                            {
                              "parameters": [
                                {
                                  "name": "total_mastodon_domains",
                                  "type": "functionParameter"
                                }
                              ],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        },
                        "table": "statistics"
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    statistics.date,\n    statistics.total_users\nFROM \n    statistics\nORDER BY \n    statistics.date DESC;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "sortBy",
                  "spec": {
                    "id": "sortBy",
                    "options": {
                      "fields": {},
                      "sort": [
                        {
                          "field": "time"
                        }
                      ]
                    }
                  }
                },
                {
                  "kind": "formatTime",
                  "spec": {
                    "id": "formatTime",
                    "options": {
                      "outputFormat": "DD",
                      "timeField": "time",
                      "timezone": "utc",
                      "useTimezone": true
                    }
                  }
                },
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_mastodon_domains",
                          "handlerKey": "max",
                          "reducerId": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "",
          "id": 29,
          "links": [],
          "title": "Total Mastodon Users by Patched Release",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "fieldMinMax": false,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "normal",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-32": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = -1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for development branch (main), compared to the total instances on development branch.",
          "id": 32,
          "links": [],
          "title": "Patched MAUs, Main",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-35": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = 0\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = 0\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for branch release-0 (latest), compared to the total instances on branch release-0.",
          "id": 35,
          "links": [],
          "title": "Patched MAUs, Latest",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-36": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= 1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = 1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for branch release-1 (latest) or older, compared to the total instances on branch release-1.",
          "id": 36,
          "links": [],
          "title": "Patched MAUs, Previous",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-4": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT software_version) AS unique_software_versions\nFROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "Count of distinct Mastodon versions, after various fork/meta identifiers are removed and nightly releases are normalized.",
          "id": 4,
          "links": [],
          "title": "All Versions",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-40": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) AS total_users FROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 40,
          "links": [],
          "title": "Total Mastodon Users",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-41": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) AS total_users FROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 41,
          "links": [],
          "title": "Total Mastodon MAUs",
          "vizConfig": {
            "group": "stat",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-42": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) as \"All Patched\"\nFROM mastodon_domains\nWHERE software_version IN (\n    SELECT software_version\n    FROM patch_versions\n    WHERE n_level >= -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT COUNT(DISTINCT domain) AS unique_domain_count\nFROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "unique_domain_count",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of instances running latest patches for any supported branch, compared to all instances.",
          "id": 42,
          "links": [],
          "title": "Patched Instances, All",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-43": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(active_users_monthly) AS total_users FROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_users",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of monthly active users (MAUs) on instances running latest patches for any supported branch, compared to all instances.",
          "id": 43,
          "links": [],
          "title": "Patched MAUs, All",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-46": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_matches AS (\n    SELECT \n        md.domain,\n        md.software_version,\n        COALESCE(ev.software_version, pv.branch) as \"Branch Version\"\n    FROM \n        mastodon_domains md\n    LEFT JOIN eol_versions ev \n        ON md.software_version LIKE ev.software_version || '%'\n    LEFT JOIN patch_versions pv \n        ON md.software_version LIKE pv.branch || '%'\n    WHERE \n        ev.software_version IS NOT NULL \n        OR pv.branch IS NOT NULL\n)\nSELECT \n    \"Branch Version\",\n    COUNT(domain) as \"Total Domains\"\nFROM \n    version_matches\nGROUP BY \n    \"Branch Version\"\nORDER BY \n    \"Branch Version\" DESC\nLIMIT 10\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 46,
          "links": [],
          "title": "Top 10 Branches by Instance",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "fixed"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "blue",
                        "value": 0
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "horizontal",
                "showValue": "auto",
                "stacking": "none",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-47": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Domain\",\n    active_users_monthly AS \"Active Users\",\n    software_version AS \"Software Version\"\nFROM mastodon_domains \nWHERE software_version NOT IN (\n    SELECT software_version \n    FROM patch_versions\n)\nAND EXISTS (\n    SELECT 1\n    FROM eol_versions\n    WHERE mastodon_domains.software_version LIKE eol_versions.software_version || '%'\n)\nORDER BY active_users_monthly DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 47,
          "links": [],
          "title": "Top 10 EOL Instances by MAUs",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-48": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    software_version AS \"Software Version\",\n    SUM(active_users_monthly) AS \"Monthly Active Users\"\nFROM mastodon_domains\nGROUP BY software_version\nORDER BY SUM(active_users_monthly) DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 48,
          "links": [],
          "title": "Top 10 Versions by MAUs",
          "vizConfig": {
            "group": "barchart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "fixed"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "fillOpacity": 80,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "lineWidth": 1,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "barRadius": 0,
                "barWidth": 0.97,
                "fullHighlight": false,
                "groupWidth": 0.7,
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "orientation": "horizontal",
                "showValue": "auto",
                "stacking": "none",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                },
                "xTickLabelRotation": 0,
                "xTickLabelSpacing": 0
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-49": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Domain\",\n    total_users AS \"Total Users\",\n    software_version AS \"Software Version\"\nFROM mastodon_domains \nWHERE software_version NOT IN (\n    SELECT software_version \n    FROM patch_versions\n)\nAND EXISTS (\n    SELECT 1\n    FROM eol_versions\n    WHERE mastodon_domains.software_version LIKE eol_versions.software_version || '%'\n)\nORDER BY total_users DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 49,
          "links": [],
          "title": "Top 10 EOL Instances by Total Users",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-5": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1 \n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n)\nSELECT \n  CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END as version,\n  COUNT(*) as count\nFROM mastodon_domains \nGROUP BY CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 5,
          "links": [],
          "title": "Patches by Instances",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 2,
                  "unit": "locale"
                },
                "overrides": [
                  {
                    "__systemRef": "hideSeriesFrom",
                    "matcher": {
                      "id": "byNames",
                      "options": {
                        "mode": "exclude",
                        "names": [
                          "count",
                          "End of Life"
                        ],
                        "prefix": "All except:",
                        "readOnly": true
                      }
                    },
                    "properties": [
                      {
                        "id": "custom.hideFrom",
                        "value": {
                          "legend": false,
                          "tooltip": true,
                          "viz": true
                        }
                      }
                    ]
                  }
                ]
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-50": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    domain AS \"Domain\",\n    active_users_monthly AS \"Active Users\",\n    software_version AS \"Software Version\"\nFROM mastodon_domains \nWHERE EXISTS (\n    SELECT 1\n    FROM patch_versions\n    WHERE mastodon_domains.software_version LIKE patch_versions.branch || '%'\n    AND patch_versions.n_level = -1\n)\nORDER BY active_users_monthly DESC\nLIMIT 10;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 50,
          "links": [],
          "title": "Top 10 Main Instances by MAUs",
          "vizConfig": {
            "group": "table",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "auto",
                    "cellOptions": {
                      "type": "auto"
                    },
                    "inspect": false
                  },
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-59": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) AS total_users FROM mastodon_domains;",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "total_users",
                          "handlerKey": "max"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of total users on instances running latest patches for any supported branch, compared to all instances.",
          "id": 59,
          "links": [],
          "title": "Patched Users, All",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-6": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1 \n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n)\nSELECT \n  CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END as version,\n  SUM(total_users) as user_count\nFROM mastodon_domains \nGROUP BY CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 6,
          "links": [],
          "title": "Patches by Total Users",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 2,
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-60": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = -1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = -1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of total users on instances running latest patches for development branch (main), compared to the total instances on development branch.",
          "id": 60,
          "links": [],
          "title": "Patched Users, Main",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-61": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as updated_users\nFROM mastodon_domains \nWHERE software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level = 0\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = 0\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of total users on instances running latest patches for branch release-0 (latest), compared to the total instances on branch release-0.",
          "id": 61,
          "links": [],
          "title": "Patched Users, Latest",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-62": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as updated_users\nFROM mastodon_domains md\nWHERE md.software_version LIKE ANY (\n    SELECT software_version || '%'\n    FROM patch_versions \n    WHERE n_level >= 1\n);\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                },
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT SUM(total_users) as \"Main Total\"\nFROM mastodon_domains\nWHERE software_version LIKE (\nSELECT branch || '.%'\nFROM patch_versions\nWHERE n_level = 1\n);",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "B"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": [
                {
                  "kind": "configFromData",
                  "spec": {
                    "id": "configFromData",
                    "options": {
                      "applyTo": {
                        "id": "byType",
                        "options": "number"
                      },
                      "configRefId": "B",
                      "mappings": [
                        {
                          "fieldName": "Main Total",
                          "handlerKey": "max",
                          "reducerId": "lastNotNull"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          },
          "description": "Count of total users on instances running latest patches for branch release-1 (latest) or older, compared to the total instances on branch release-1.",
          "id": 62,
          "links": [],
          "title": "Patched Users, Previous",
          "vizConfig": {
            "group": "gauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "percentage",
                    "steps": [
                      {
                        "color": "red",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 20
                      },
                      {
                        "color": "yellow",
                        "value": 50
                      },
                      {
                        "color": "green",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "minVizHeight": 75,
                "minVizWidth": 75,
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "/.*/",
                  "values": true
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": false,
                "sizing": "auto"
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-66": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH \n-- Dynamically determine target versions from patch_versions table\ntarget_versions AS (\n    SELECT branch\n    FROM patch_versions\n),\n-- Count domains with specific versions (that start with the branch values)\nspecific_versions AS (\n    SELECT COUNT(DISTINCT md.domain) as specific_version_count\n    FROM mastodon_domains md\n    WHERE EXISTS (\n        SELECT 1 \n        FROM target_versions tv\n        WHERE md.software_version LIKE tv.branch || '%'\n    )\n),\n-- Count all domains\ntotal_domains AS (\n    SELECT COUNT(DISTINCT domain) as total_count\n    FROM mastodon_domains\n)\n-- Final result with renamed columns\nSELECT \n    specific_version_count AS \"Supported\",\n    (total_count - specific_version_count) AS \"EOL\"\nFROM specific_versions, total_domains;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 66,
          "links": [],
          "title": "Supported Branch by Instances",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 2,
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-67": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH \n-- Dynamically determine target versions from patch_versions table\ntarget_versions AS (\n    SELECT branch\n    FROM patch_versions\n),\n-- Sum active_users_monthly for domains with specific versions\nspecific_versions AS (\n    SELECT COALESCE(SUM(md.active_users_monthly), 0) as specific_version_users\n    FROM mastodon_domains md\n    WHERE EXISTS (\n        SELECT 1 \n        FROM target_versions tv\n        WHERE md.software_version LIKE tv.branch || '%'\n    )\n),\n-- Sum active_users_monthly for all domains\ntotal_users AS (\n    SELECT COALESCE(SUM(active_users_monthly), 0) as total_users_count\n    FROM mastodon_domains\n)\n-- Final result with renamed columns\nSELECT \n    specific_version_users AS \"Supported\",\n    (total_users_count - specific_version_users) AS \"EOL\"\nFROM specific_versions, total_users;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 67,
          "links": [],
          "title": "Supported Branch by MAUs",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 2,
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-68": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH \n-- Dynamically determine target versions from patch_versions table\ntarget_versions AS (\n    SELECT branch\n    FROM patch_versions\n),\n-- Sum total_users for domains with specific versions\nspecific_versions AS (\n    SELECT COALESCE(SUM(md.total_users), 0) as specific_version_users\n    FROM mastodon_domains md\n    WHERE EXISTS (\n        SELECT 1 \n        FROM target_versions tv\n        WHERE md.software_version LIKE tv.branch || '%'\n    )\n),\n-- Sum total_users for all domains\ntotal_users AS (\n    SELECT COALESCE(SUM(total_users), 0) as total_users_count\n    FROM mastodon_domains\n)\n-- Final result with renamed columns\nSELECT \n    specific_version_users AS \"Supported\",\n    (total_users_count - specific_version_users) AS \"EOL\"\nFROM specific_versions, total_users;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 68,
          "links": [],
          "title": "Supported Branch by Total Users",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 2,
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-7": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "WITH version_cases AS (\n  SELECT software_version\n  FROM patch_versions\n),\neol_check AS (\n  SELECT DISTINCT software_version\n  FROM mastodon_domains md\n  WHERE EXISTS (\n    SELECT 1 \n    FROM eol_versions ev\n    WHERE md.software_version LIKE ev.software_version || '.%'\n       OR md.software_version LIKE ev.software_version || '%'\n  )\n)\nSELECT \n  CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END as version,\n  SUM(active_users_monthly) as user_count\nFROM mastodon_domains \nGROUP BY CASE \n    WHEN software_version IN (SELECT software_version FROM version_cases) THEN software_version\n    WHEN software_version IN (SELECT software_version FROM eol_check) THEN 'EOL'\n    ELSE 'Unpatched'\n  END;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 7,
          "links": [],
          "title": "Patches by MAUs",
          "vizConfig": {
            "group": "piechart",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "purple",
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  "decimals": 2,
                  "unit": "locale"
                },
                "overrides": []
              },
              "options": {
                "displayLabels": [],
                "legend": {
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true,
                  "values": [
                    "percent"
                  ]
                },
                "pieType": "donut",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": true
                },
                "sort": "desc",
                "tooltip": {
                  "hideZeros": false,
                  "mode": "single",
                  "sort": "none"
                }
              }
            },
            "version": "12.2.0"
          }
        }
      },
      "panel-70": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    COUNT(CASE WHEN software_version LIKE '4.5%' THEN 1 END) * 100.0 / COUNT(*) AS \"4.5\",\n    \n    COUNT(CASE WHEN \n        software_version LIKE '4.5%' OR\n        software_version LIKE '4.4%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.4+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '4.5%' OR\n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' \n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.3+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '4.5%' OR\n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR \n        software_version LIKE '4.2%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.2+\",\n\n    COUNT(CASE WHEN \n        software_version LIKE '4.5%' OR\n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR \n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%'\n    THEN 1 END) * 100.0 / COUNT(*) AS \"4.1+\"\n\nFROM \n    mastodon_domains\nWHERE \n    software_version IS NOT NULL;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 70,
          "links": [],
          "title": "Percent of Instances",
          "vizConfig": {
            "group": "bargauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "displayMode": "gradient",
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-71": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    SUM(CASE WHEN software_version LIKE '4.5%' THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.5\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' \n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.4+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' \n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.3+\",\n\n    SUM(CASE WHEN\n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR \n        software_version LIKE '4.2%'\n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.2+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR \n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%'\n    THEN active_users_monthly ELSE 0 END) * 100.0 / \n        SUM(active_users_monthly) AS \"4.1+\"\nFROM \n    mastodon_domains\nWHERE \n    software_version IS NOT NULL\n    AND active_users_monthly IS NOT NULL;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 71,
          "links": [],
          "title": "Percent of MAUs",
          "vizConfig": {
            "group": "bargauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "fieldMinMax": false,
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "displayMode": "gradient",
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      },
      "panel-72": {
        "kind": "Panel",
        "spec": {
          "data": {
            "kind": "QueryGroup",
            "spec": {
              "queries": [
                {
                  "kind": "PanelQuery",
                  "spec": {
                    "hidden": false,
                    "query": {
                      "datasource": {
                        "name": "aedqwq5gb2ebkc"
                      },
                      "group": "grafana-postgresql-datasource",
                      "kind": "DataQuery",
                      "spec": {
                        "editorMode": "code",
                        "format": "table",
                        "rawQuery": true,
                        "rawSql": "SELECT \n    SUM(CASE WHEN software_version LIKE '4.5%' THEN total_users ELSE 0 END) * 100.0 / \n        SUM(total_users) AS \"4.5\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' \n    THEN total_users ELSE 0 END) * 100.0 / \n        SUM(total_users) AS \"4.4+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' \n    THEN total_users ELSE 0 END) * 100.0 / \n        SUM(total_users) AS \"4.3+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR \n        software_version LIKE '4.2%'\n    THEN total_users ELSE 0 END) * 100.0 / \n        SUM(total_users) AS \"4.2+\",\n\n    SUM(CASE WHEN \n        software_version LIKE '4.5%' OR \n        software_version LIKE '4.4%' OR \n        software_version LIKE '4.3%' OR \n        software_version LIKE '4.2%' OR\n        software_version LIKE '4.1%'\n    THEN total_users ELSE 0 END) * 100.0 / \n        SUM(total_users) AS \"4.1+\"\nFROM \n    mastodon_domains\nWHERE \n    software_version IS NOT NULL\n    AND total_users IS NOT NULL;\n",
                        "sql": {
                          "columns": [
                            {
                              "parameters": [],
                              "type": "function"
                            }
                          ],
                          "groupBy": [
                            {
                              "property": {
                                "type": "string"
                              },
                              "type": "groupBy"
                            }
                          ],
                          "limit": 50
                        }
                      },
                      "version": "v0"
                    },
                    "refId": "A"
                  }
                }
              ],
              "queryOptions": {},
              "transformations": []
            }
          },
          "description": "",
          "id": 72,
          "links": [],
          "title": "Percent of Total Users",
          "vizConfig": {
            "group": "bargauge",
            "kind": "VizConfig",
            "spec": {
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "purple",
                        "value": 0
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "options": {
                "displayMode": "gradient",
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": false
                },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "auto",
                "orientation": "auto",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
              }
            },
            "version": "12.2.0-16952534486"
          }
        }
      }
    },
    "layout": {
      "kind": "GridLayout",
      "spec": {
        "items": []
      }
    },
    "links": [],
    "liveNow": true,
    "preload": false,
    "tags": [],
    "timeSettings": {
      "autoRefresh": "auto",
      "autoRefreshIntervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ],
      "fiscalYearStartMonth": 0,
      "from": "now-6h",
      "hideTimepicker": false,
      "timezone": "browser",
      "to": "now"
    },
    "title": "vmcrawl",
    "variables": []
  },
  "status": {}
}